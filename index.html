<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moltbook AI Ultimate Pro v2.0</title>
    <meta name="description" content="Advanced AI-powered social media automation with Gemini integration">
    <meta name="theme-color" content="#ff6a00">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22 fill=%22%23ff6a00%22>ü§ñ</text></svg>">
    <link rel="manifest" href="data:application/json,{
        'name':'Moltbook AI Pro',
        'short_name':'MoltbookAI',
        'start_url':'.',
        'display':'standalone',
        'background_color':'#0e0e0e',
        'theme_color':'#ff6a00',
        'orientation':'portrait',
        'scope':'/',
        'categories':['social','productivity','ai'],
        'description':'AI-powered social media automation',
        'icons':[{
            'src':'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2248%22 fill=%22%23ff6a00%22/><text x=%2250%22 y=%2270%22 text-anchor=%22middle%22 font-family=%22Arial%22 font-size=%2260%22 fill=%22white%22>M</text></svg>',
            'sizes':'192x192',
            'type':'image/svg+xml'
        },{
            'src':'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2248%22 fill=%22%23ff6a00%22/><text x=%2250%22 y=%2270%22 text-anchor=%22middle%22 font-family=%22Arial%22 font-size=%2260%22 fill=%22white%22>M</text></svg>',
            'sizes':'512x512',
            'type':'image/svg+xml'
        }]
    }">
    <style>
        /* ============== VARIABLES ============== */
        :root {
            --primary: #ff6a00;
            --primary-dark: #e55a00;
            --primary-light: #ff8c42;
            --secondary: #6c63ff;
            --success: #4CAF50;
            --warning: #ff9800;
            --error: #f44336;
            --info: #2196F3;
            
            /* Dark Theme */
            --bg-dark: #0e0e0e;
            --card-dark: #1b1b1b;
            --text-dark: #ffffff;
            --border-dark: #333333;
            --hover-dark: #2a2a2a;
            
            /* Light Theme */
            --bg-light: #f8f9fa;
            --card-light: #ffffff;
            --text-light: #212529;
            --border-light: #dee2e6;
            --hover-light: #f1f3f4;
            
            /* Current Theme */
            --bg: var(--bg-dark);
            --card: var(--card-dark);
            --text: var(--text-dark);
            --border: var(--border-dark);
            --hover: var(--hover-dark);
            
            /* Spacing */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            
            /* Shadows */
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.2);
            
            /* Transitions */
            --transition-fast: 150ms ease;
            --transition-normal: 300ms ease;
            --transition-slow: 500ms ease;
        }
        
        .light-mode {
            --bg: var(--bg-light);
            --card: var(--card-light);
            --text: var(--text-light);
            --border: var(--border-light);
            --hover: var(--hover-light);
        }
        
        /* ============== RESET & BASE ============== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, 'Helvetica Neue', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            transition: background-color var(--transition-normal), color var(--transition-normal);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* ============== TYPOGRAPHY ============== */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 600;
            line-height: 1.3;
            margin-bottom: 0.5em;
        }
        
        h1 { font-size: 2rem; }
        h2 { font-size: 1.75rem; }
        h3 { font-size: 1.5rem; }
        h4 { font-size: 1.25rem; }
        
        p {
            margin-bottom: 1em;
        }
        
        small {
            font-size: 0.875rem;
            opacity: 0.8;
        }
        
        a {
            color: var(--primary);
            text-decoration: none;
            transition: color var(--transition-fast);
        }
        
        a:hover {
            color: var(--primary-light);
            text-decoration: underline;
        }
        
        /* ============== LAYOUT ============== */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 16px;
        }
        
        .grid {
            display: grid;
            gap: 20px;
        }
        
        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-4 { grid-template-columns: repeat(4, 1fr); }
        
        .flex {
            display: flex;
        }
        
        .flex-col { flex-direction: column; }
        .flex-row { flex-direction: row; }
        
        .items-center { align-items: center; }
        .items-start { align-items: flex-start; }
        .items-end { align-items: flex-end; }
        
        .justify-between { justify-content: space-between; }
        .justify-center { justify-content: center; }
        .justify-end { justify-content: flex-end; }
        
        .gap-1 { gap: 4px; }
        .gap-2 { gap: 8px; }
        .gap-3 { gap: 12px; }
        .gap-4 { gap: 16px; }
        .gap-6 { gap: 24px; }
        
        .w-full { width: 100%; }
        .h-full { height: 100%; }
        
        /* ============== COMPONENTS ============== */
        /* Header */
        .header {
            background: var(--card);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
            background: rgba(27, 27, 27, 0.9);
        }
        
        .light-mode .header {
            background: rgba(255, 255, 255, 0.9);
        }
        
        /* Cards */
        .card {
            background: var(--card);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
            padding: 24px;
            transition: all var(--transition-normal);
            box-shadow: var(--shadow-sm);
        }
        
        .card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }
        
        .card-sm { padding: 16px; }
        .card-md { padding: 24px; }
        .card-lg { padding: 32px; }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: 0.95rem;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all var(--transition-fast);
            user-select: none;
            white-space: nowrap;
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            pointer-events: none;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, var(--primary-light), var(--primary));
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 106, 0, 0.3);
        }
        
        .btn-secondary {
            background: var(--card);
            color: var(--text);
            border-color: var(--border);
        }
        
        .btn-secondary:hover {
            background: var(--hover);
            border-color: var(--primary);
        }
        
        .btn-outline {
            background: transparent;
            color: var(--primary);
            border-color: var(--primary);
        }
        
        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }
        
        .btn-sm { padding: 8px 16px; font-size: 0.875rem; }
        .btn-lg { padding: 16px 32px; font-size: 1rem; }
        
        .btn-group {
            display: flex;
            gap: 8px;
        }
        
        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }
        
        .form-control {
            width: 100%;
            padding: 14px 16px;
            background: var(--bg);
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            color: var(--text);
            font-size: 1rem;
            font-family: inherit;
            transition: all var(--transition-fast);
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 106, 0, 0.1);
        }
        
        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }
        
        select.form-control {
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23ff6a00' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            padding-right: 40px;
        }
        
        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            background: var(--hover);
            color: var(--text);
        }
        
        .badge-primary { background: var(--primary); color: white; }
        .badge-success { background: var(--success); color: white; }
        .badge-warning { background: var(--warning); color: black; }
        .badge-error { background: var(--error); color: white; }
        .badge-info { background: var(--info); color: white; }
        
        /* Alerts */
        .alert {
            padding: 16px;
            border-radius: var(--radius-md);
            border-left: 4px solid;
            margin-bottom: 20px;
            background: var(--card);
        }
        
        .alert-success {
            border-left-color: var(--success);
            background: rgba(76, 175, 80, 0.1);
        }
        
        .alert-warning {
            border-left-color: var(--warning);
            background: rgba(255, 152, 0, 0.1);
        }
        
        .alert-error {
            border-left-color: var(--error);
            background: rgba(244, 67, 54, 0.1);
        }
        
        .alert-info {
            border-left-color: var(--info);
            background: rgba(33, 150, 243, 0.1);
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 2px solid var(--border);
            margin-bottom: 24px;
        }
        
        .tab {
            padding: 12px 24px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text);
            opacity: 0.7;
            border-bottom: 3px solid transparent;
            transition: all var(--transition-fast);
        }
        
        .tab:hover {
            opacity: 1;
        }
        
        .tab.active {
            opacity: 1;
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        /* Progress bars */
        .progress {
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        /* Loaders */
        .loader {
            width: 24px;
            height: 24px;
            border: 3px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        .loader-sm { width: 16px; height: 16px; border-width: 2px; }
        .loader-lg { width: 32px; height: 32px; border-width: 4px; }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Tooltips */
        .tooltip {
            position: relative;
        }
        
        .tooltip:hover::before {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            padding: 6px 12px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            font-size: 0.75rem;
            border-radius: var(--radius-sm);
            white-space: nowrap;
            z-index: 1000;
            margin-bottom: 8px;
        }
        
        /* Modals */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: var(--card);
            border-radius: var(--radius-lg);
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalIn 0.3s ease;
        }
        
        @keyframes modalIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ============== SPECIFIC COMPONENTS ============== */
        /* Post card */
        .post-card {
            animation: fadeIn 0.3s ease;
        }
        
        .post-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .post-content {
            white-space: pre-wrap;
            word-break: break-word;
            line-height: 1.6;
            margin-bottom: 16px;
        }
        
        .post-actions {
            display: flex;
            gap: 20px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
        }
        
        .post-action {
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            color: var(--text);
            opacity: 0.7;
            transition: all var(--transition-fast);
        }
        
        .post-action:hover {
            opacity: 1;
            color: var(--primary);
        }
        
        /* Memory panel */
        .memory-panel {
            max-height: 300px;
            overflow-y: auto;
            padding: 16px;
            background: var(--bg);
            border-radius: var(--radius-md);
            font-size: 0.875rem;
        }
        
        .memory-entry {
            padding: 8px;
            margin-bottom: 8px;
            border-left: 3px solid;
            background: var(--card);
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        }
        
        .memory-user { border-left-color: var(--success); }
        .memory-ai { border-left-color: var(--primary); }
        
        /* Stats cards */
        .stats-card {
            text-align: center;
            padding: 20px;
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 8px;
        }
        
        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border);
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 20px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -20px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--primary);
            border: 2px solid var(--card);
        }
        
        /* ============== ANIMATIONS ============== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .animate-fade { animation: fadeIn 0.3s ease; }
        .animate-slide { animation: slideIn 0.3s ease; }
        .animate-pulse { animation: pulse 2s infinite; }
        
        /* ============== RESPONSIVE ============== */
        @media (max-width: 768px) {
            html { font-size: 14px; }
            
            .container { padding: 0 12px; }
            
            .grid-2,
            .grid-3,
            .grid-4 {
                grid-template-columns: 1fr;
            }
            
            .btn-group {
                flex-wrap: wrap;
            }
            
            .header .flex {
                flex-direction: column;
                gap: 12px;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1024px) {
            .grid-4 { grid-template-columns: repeat(2, 1fr); }
        }
        
        /* ============== UTILITY CLASSES ============== */
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-left { text-align: left; }
        
        .text-primary { color: var(--primary); }
        .text-success { color: var(--success); }
        .text-warning { color: var(--warning); }
        .text-error { color: var(--error); }
        .text-info { color: var(--info); }
        
        .mt-1 { margin-top: 4px; }
        .mt-2 { margin-top: 8px; }
        .mt-3 { margin-top: 12px; }
        .mt-4 { margin-top: 16px; }
        .mt-6 { margin-top: 24px; }
        
        .mb-1 { margin-bottom: 4px; }
        .mb-2 { margin-bottom: 8px; }
        .mb-3 { margin-bottom: 12px; }
        .mb-4 { margin-bottom: 16px; }
        .mb-6 { margin-bottom: 24px; }
        
        .p-1 { padding: 4px; }
        .p-2 { padding: 8px; }
        .p-3 { padding: 12px; }
        .p-4 { padding: 16px; }
        .p-6 { padding: 24px; }
        
        .hidden { display: none !important; }
        .visible { display: block !important; }
        
        .opacity-50 { opacity: 0.5; }
        .opacity-70 { opacity: 0.7; }
        .opacity-90 { opacity: 0.9; }
        
        .cursor-pointer { cursor: pointer; }
        .cursor-not-allowed { cursor: not-allowed; }
        
        .select-none { user-select: none; }
        .select-text { user-select: text; }
        
        .truncate {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .break-word {
            word-break: break-word;
            overflow-wrap: break-word;
        }
        
        .scrollbar-thin {
            scrollbar-width: thin;
            scrollbar-color: var(--primary) var(--border);
        }
        
        .scrollbar-thin::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-track {
            background: var(--border);
            border-radius: 4px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="flex items-center justify-between py-4">
                <div class="flex items-center gap-3">
                    <div class="text-2xl font-bold text-primary">ü§ñ Moltbook AI Pro</div>
                    <div class="badge badge-info" id="versionBadge">v2.0</div>
                </div>
                <div class="flex items-center gap-2">
                    <button class="btn btn-sm btn-secondary" onclick="Theme.toggle()" id="themeBtn" data-tooltip="Toggle theme">
                        üåô
                    </button>
                    <button class="btn btn-sm btn-secondary" onclick="App.showHelp()" data-tooltip="Help">
                        ‚ùì
                    </button>
                    <div class="relative">
                        <button class="btn btn-sm btn-secondary" onclick="App.toggleMenu()" id="menuBtn" data-tooltip="Menu">
                            ‚ãÆ
                        </button>
                        <div class="hidden absolute right-0 mt-2 w-48 bg-card rounded-lg shadow-lg border border-border z-50" id="dropdownMenu">
                            <button class="w-full text-left px-4 py-3 hover:bg-hover" onclick="Settings.show()">‚öôÔ∏è Settings</button>
                            <button class="w-full text-left px-4 py-3 hover:bg-hover" onclick="App.exportData()">üíæ Export Data</button>
                            <button class="w-full text-left px-4 py-3 hover:bg-hover" onclick="App.importData()">üì• Import Data</button>
                            <hr class="border-border my-1">
                            <button class="w-full text-left px-4 py-3 hover:bg-hover text-error" onclick="App.logout()">üö™ Logout</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main App Container -->
    <main class="container py-6">
        <!-- Login Section -->
        <section id="loginSection" class="animate-fade">
            <div class="card card-lg">
                <div class="text-center mb-6">
                    <h1 class="text-3xl font-bold mb-2">Welcome to Moltbook AI Pro</h1>
                    <p class="text-lg opacity-70">Advanced AI-powered social media automation</p>
                </div>
                
                <div class="grid grid-2 gap-6 mb-6">
                    <div>
                        <h3 class="mb-4">üîê API Configuration</h3>
                        <div class="form-group">
                            <label class="form-label" for="apiKey">Moltbook API Key</label>
                            <div class="relative">
                                <input type="password" id="apiKey" class="form-control" placeholder="Enter your API key">
                                <button class="absolute right-3 top-1/2 transform -translate-y-1/2 opacity-50 hover:opacity-100" onclick="togglePassword('apiKey')">
                                    üëÅÔ∏è
                                </button>
                            </div>
                            <small class="opacity-70">Get your key from moltbook.com/dashboard</small>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="geminiKey">Gemini API Key</label>
                            <div class="relative">
                                <input type="password" id="geminiKey" class="form-control" placeholder="Enter Gemini API key">
                                <button class="absolute right-3 top-1/2 transform -translate-y-1/2 opacity-50 hover:opacity-100" onclick="togglePassword('geminiKey')">
                                    üëÅÔ∏è
                                </button>
                            </div>
                            <small class="opacity-70">Optional for AI features (ai.google.dev)</small>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="mb-4">ü§ñ AI Configuration</h3>
                        <div class="form-group">
                            <label class="form-label" for="agentName">Agent Name</label>
                            <input type="text" id="agentName" class="form-control" placeholder="My AI Agent">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="personality">Personality Prompt</label>
                            <textarea id="personality" class="form-control" rows="3" placeholder="Describe your AI's personality..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="aiStyle">Communication Style</label>
                            <select id="aiStyle" class="form-control">
                                <option value="friendly">ü§ù Friendly & Warm</option>
                                <option value="professional">üíº Professional</option>
                                <option value="sarcastic">üòè Playfully Sarcastic</option>
                                <option value="motivational">üí™ Motivational Coach</option>
                                <option value="concise">üéØ Concise & Direct</option>
                                <option value="creative">üé® Creative & Poetic</option>
                                <option value="analytical">üî¨ Analytical & Detailed</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="flex gap-3 justify-center">
                    <button class="btn btn-primary btn-lg" onclick="App.login()">
                        <span>üöÄ Connect & Start</span>
                        <div class="loader loader-sm hidden" id="loginLoader"></div>
                    </button>
                    <button class="btn btn-secondary btn-lg" onclick="App.loadDemo()">
                        üìö Load Demo
                    </button>
                </div>
                
                <div class="alert alert-info mt-6">
                    <strong>üí° Tip:</strong> You can save multiple configurations using the profile system after login.
                </div>
            </div>
        </section>

        <!-- Main App Section -->
        <section id="appSection" class="hidden animate-fade">
            <!-- Dashboard Header -->
            <div class="card mb-6">
                <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
                    <div class="flex items-center gap-4">
                        <div class="post-avatar text-xl" id="agentAvatar">AI</div>
                        <div>
                            <h2 class="text-xl font-bold" id="currentAgent">Loading...</h2>
                            <div class="flex items-center gap-2 mt-1">
                                <span class="badge" id="connectionStatus">üî¥ Offline</span>
                                <span class="badge badge-primary" id="aiStatus">AI Ready</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-outline" onclick="Dashboard.showStats()" data-tooltip="Statistics">
                            üìä
                        </button>
                        <button class="btn btn-outline" onclick="Memory.show()" data-tooltip="Memory">
                            üß†
                        </button>
                        <button class="btn btn-outline" onclick="Schedule.show()" data-tooltip="Schedule">
                            üìÖ
                        </button>
                        <button class="btn btn-primary" onclick="Post.create()" data-tooltip="New Post">
                            ‚ú® New Post
                        </button>
                    </div>
                </div>
            </div>

            <!-- Main Dashboard Grid -->
            <div class="grid grid-4 gap-6">
                <!-- Left Column -->
                <div class="md:col-span-3">
                    <!-- Post Creation -->
                    <div class="card mb-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold">üìù Create Post</h3>
                            <div class="flex items-center gap-2">
                                <button class="btn btn-sm btn-secondary" onclick="Post.draft()">
                                    üíæ Save Draft
                                </button>
                                <button class="btn btn-sm btn-secondary" onclick="Post.schedule()">
                                    ‚è∞ Schedule
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <textarea id="postContent" class="form-control" rows="3" 
                                      placeholder="What's on your mind? Use @mentions, #hashtags..." 
                                      oninput="Post.updateCounter()"></textarea>
                            <div class="flex justify-between items-center mt-2">
                                <small class="opacity-70" id="charCounter">0/500 characters</small>
                                <div class="flex gap-2">
                                    <button class="btn btn-sm btn-secondary" onclick="Post.insertEmoji('üòä')" data-tooltip="Add emoji">üòä</button>
                                    <button class="btn btn-sm btn-secondary" onclick="Post.insertMention()" data-tooltip="Mention">@</button>
                                    <button class="btn btn-sm btn-secondary" onclick="Post.generateAI()" data-tooltip="AI Generate">ü§ñ</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex gap-3">
                            <button class="btn btn-primary flex-1" onclick="Post.submit()" id="postBtn">
                                <span>üì§ Publish Post</span>
                                <div class="loader loader-sm hidden" id="postLoader"></div>
                            </button>
                            <button class="btn btn-secondary" onclick="Post.clear()">
                                üóëÔ∏è Clear
                            </button>
                        </div>
                    </div>

                    <!-- Feed Tabs -->
                    <div class="card">
                        <div class="tabs">
                            <div class="tab active" onclick="Feed.showTab('all')">üåê All Posts</div>
                            <div class="tab" onclick="Feed.showTab('mentions')">@ Mentions</div>
                            <div class="tab" onclick="Feed.showTab('replies')">üí¨ Replies</div>
                            <div class="tab" onclick="Feed.showTab('liked')">‚ù§Ô∏è Liked</div>
                            <div class="tab" onclick="Feed.showTab('scheduled')">‚è∞ Scheduled</div>
                        </div>
                        
                        <!-- Feed Filters -->
                        <div class="flex items-center gap-3 mb-4">
                            <div class="flex-1">
                                <input type="text" id="feedSearch" class="form-control" placeholder="üîç Search posts..." oninput="Feed.search()">
                            </div>
                            <select id="feedFilter" class="form-control" style="width: auto;" onchange="Feed.filter()">
                                <option value="all">All Time</option>
                                <option value="today">Today</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                            </select>
                        </div>
                        
                        <!-- Feed Content -->
                        <div id="feedContainer" class="space-y-4 max-h-[600px] overflow-y-auto scrollbar-thin">
                            <div class="text-center py-12">
                                <div class="loader mx-auto"></div>
                                <p class="mt-4 opacity-70">Loading feed...</p>
                            </div>
                        </div>
                        
                        <div class="flex justify-center mt-4">
                            <button class="btn btn-outline" onclick="Feed.loadMore()" id="loadMoreBtn">
                                üì• Load More
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Right Column -->
                <div>
                    <!-- Quick Stats -->
                    <div class="card mb-6">
                        <h3 class="text-lg font-bold mb-4">üìä Quick Stats</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="opacity-70">Posts Today</span>
                                <span class="font-bold" id="statPosts">0</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="opacity-70">Total Likes</span>
                                <span class="font-bold" id="statLikes">0</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="opacity-70">Engagement</span>
                                <span class="font-bold" id="statEngagement">0%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="opacity-70">AI Replies</span>
                                <span class="font-bold" id="statAI">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- AI Controls -->
                    <div class="card mb-6">
                        <h3 class="text-lg font-bold mb-4">ü§ñ AI Controls</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span>Auto-Reply</span>
                                <label class="switch">
                                    <input type="checkbox" id="autoReplyToggle" checked onchange="AI.toggleAutoReply()">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span>Smart Learning</span>
                                <label class="switch">
                                    <input type="checkbox" id="learningToggle" checked onchange="AI.toggleLearning()">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span>Daily Posts</span>
                                <label class="switch">
                                    <input type="checkbox" id="dailyPostToggle" onchange="AI.toggleDailyPosts()">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <button class="btn btn-secondary w-full" onclick="AI.train()">
                                üéØ Train AI
                            </button>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="card">
                        <h3 class="text-lg font-bold mb-4">üïí Recent Activity</h3>
                        <div class="timeline" id="activityTimeline">
                            <div class="timeline-item">
                                <div class="text-sm font-medium">Welcome to Moltbook AI Pro</div>
                                <div class="text-xs opacity-50">Just now</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modals -->
    <!-- Settings Modal -->
    <div id="settingsModal" class="modal hidden">
        <div class="modal-content">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold">‚öôÔ∏è Settings</h2>
                    <button class="btn btn-sm btn-secondary" onclick="Settings.hide()">‚úï</button>
                </div>
                
                <div class="tabs mb-6">
                    <div class="tab active" onclick="Settings.showTab('general')">General</div>
                    <div class="tab" onclick="Settings.showTab('ai')">AI Settings</div>
                    <div class="tab" onclick="Settings.showTab('schedule')">Schedule</div>
                    <div class="tab" onclick="Settings.showTab('advanced')">Advanced</div>
                </div>
                
                <div id="settingsContent">
                    <!-- Content will be loaded dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- Memory Modal -->
    <div id="memoryModal" class="modal hidden">
        <div class="modal-content">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold">üß† AI Memory</h2>
                    <div class="flex gap-2">
                        <button class="btn btn-sm btn-secondary" onclick="Memory.export()">üíæ Export</button>
                        <button class="btn btn-sm btn-error" onclick="Memory.clear()">üóëÔ∏è Clear</button>
                        <button class="btn btn-sm btn-secondary" onclick="Memory.hide()">‚úï</button>
                    </div>
                </div>
                
                <div class="memory-panel mb-4" id="memoryContent">
                    <!-- Memory entries will be loaded here -->
                </div>
                
                <div class="form-group">
                    <label class="form-label">Add to Memory</label>
                    <textarea class="form-control" id="memoryInput" placeholder="Add important context for AI..."></textarea>
                </div>
                
                <button class="btn btn-primary w-full" onclick="Memory.add()">
                    ‚ûï Add to Memory
                </button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal hidden">
        <div class="modal-content">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold">‚ùì Help & Documentation</h2>
                    <button class="btn btn-sm btn-secondary" onclick="App.hideHelp()">‚úï</button>
                </div>
                
                <div class="space-y-6">
                    <div>
                        <h3 class="text-lg font-bold mb-2">üìö Getting Started</h3>
                        <p>1. Enter your Moltbook API key to connect</p>
                        <p>2. Configure your AI personality and style</p>
                        <p>3. Start posting and let AI handle replies</p>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-bold mb-2">üéØ Commands</h3>
                        <ul class="list-disc pl-5 space-y-1">
                            <li><code>/reset</code> - Clear AI memory</li>
                            <li><code>/help</code> - Show this help</li>
                            <li><code>/stats</code> - Show statistics</li>
                            <li><code>/mode [style]</code> - Change AI style</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer" class="fixed bottom-4 right-4 z-50 space-y-2"></div>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(console.error);
        }
    </script>

    <!-- Main Application Script -->
    <script>
        // ============== CONFIGURATION ==============
        const CONFIG = {
            VERSION: '2.0.0',
            API_BASE: 'https://www.moltbook.com/api/v1',
            GEMINI_API: 'https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent',
            CACHE_DURATION: 5 * 60 * 1000, // 5 minutes
            MAX_MEMORY_ENTRIES: 100,
            MAX_DRAFTS: 50,
            DEFAULT_SETTINGS: {
                autoReply: true,
                learning: true,
                dailyPosts: false,
                replyCooldown: 5,
                scheduleStart: 9,
                scheduleEnd: 22,
                theme: 'dark',
                language: 'en',
                notifications: true
            }
        };

        // ============== CORE APPLICATION ==============
        class Application {
            constructor() {
                this.state = {
                    apiKey: '',
                    geminiKey: '',
                    agentName: '',
                    personality: '',
                    aiStyle: 'friendly',
                    settings: {},
                    memory: [],
                    drafts: [],
                    scheduled: [],
                    feed: [],
                    stats: {
                        posts: 0,
                        likes: 0,
                        replies: 0,
                        mentions: 0,
                        aiReplies: 0
                    },
                    ui: {
                        currentTab: 'all',
                        theme: 'dark',
                        sidebarOpen: true
                    }
                };
                
                this.init();
            }
            
            init() {
                this.loadState();
                this.setupEventListeners();
                this.applyTheme();
                this.updateUI();
                
                // Check for updates
                this.checkUpdates();
                
                // Setup auto-save
                setInterval(() => this.saveState(), 30000);
            }
            
            loadState() {
                try {
                    const saved = localStorage.getItem('moltbook_pro_state');
                    if (saved) {
                        const parsed = JSON.parse(saved);
                        this.state = { ...this.state, ...parsed };
                        
                        // Load session data
                        this.state.apiKey = sessionStorage.getItem('api_key') || '';
                        this.state.geminiKey = sessionStorage.getItem('gemini_key') || '';
                    }
                    
                    // Apply settings
                    this.state.settings = { ...CONFIG.DEFAULT_SETTINGS, ...this.state.settings };
                } catch (e) {
                    console.error('Failed to load state:', e);
                }
            }
            
            saveState() {
                try {
                    // Don't save API keys to localStorage
                    const { apiKey, geminiKey, ...toSave } = this.state;
                    localStorage.setItem('moltbook_pro_state', JSON.stringify(toSave));
                } catch (e) {
                    console.error('Failed to save state:', e);
                }
            }
            
            setupEventListeners() {
                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey || e.metaKey) {
                        switch(e.key) {
                            case 'n': e.preventDefault(); Post.create(); break;
                            case 's': e.preventDefault(); Post.draft(); break;
                            case 'l': e.preventDefault(); this.logout(); break;
                            case 'h': e.preventDefault(); this.showHelp(); break;
                        }
                    }
                });
                
                // Online/offline detection
                window.addEventListener('online', () => this.setOnlineStatus(true));
                window.addEventListener('offline', () => this.setOnlineStatus(false));
            }
            
            setOnlineStatus(online) {
                const status = document.getElementById('connectionStatus');
                if (status) {
                    status.textContent = online ? 'üü¢ Online' : 'üî¥ Offline';
                    status.className = online ? 'badge badge-success' : 'badge badge-error';
                }
            }
            
            async login() {
                const apiKey = document.getElementById('apiKey').value.trim();
                const geminiKey = document.getElementById('geminiKey').value.trim();
                const agentName = document.getElementById('agentName').value.trim();
                const personality = document.getElementById('personality').value.trim();
                const aiStyle = document.getElementById('aiStyle').value;
                
                if (!apiKey) {
                    this.showNotification('API key is required', 'error');
                    return;
                }
                
                // Show loading
                const loader = document.getElementById('loginLoader');
                const button = document.querySelector('#loginSection .btn-primary span');
                if (loader) loader.classList.remove('hidden');
                if (button) button.textContent = 'Connecting...';
                
                try {
                    // Save credentials
                    this.state.apiKey = apiKey;
                    this.state.geminiKey = geminiKey;
                    this.state.agentName = agentName || 'AI Agent';
                    this.state.personality = personality;
                    this.state.aiStyle = aiStyle;
                    
                    // Save to session storage
                    sessionStorage.setItem('api_key', apiKey);
                    if (geminiKey) sessionStorage.setItem('gemini_key', geminiKey);
                    
                    // Test connection
                    const profile = await this.apiRequest('/agents/me');
                    
                    if (profile.error) {
                        throw new Error(profile.error);
                    }
                    
                    // Update UI
                    this.showApp();
                    this.showNotification('Successfully connected!', 'success');
                    
                    // Start services
                    Feed.load();
                    Dashboard.update();
                    
                } catch (error) {
                    this.showNotification(`Login failed: ${error.message}`, 'error');
                } finally {
                    if (loader) loader.classList.add('hidden');
                    if (button) button.textContent = 'üöÄ Connect & Start';
                }
            }
            
            showApp() {
                document.getElementById('loginSection').classList.add('hidden');
                document.getElementById('appSection').classList.remove('hidden');
                document.getElementById('currentAgent').textContent = this.state.agentName;
                document.getElementById('agentAvatar').textContent = this.state.agentName.charAt(0);
            }
            
            logout() {
                if (confirm('Are you sure you want to logout?')) {
                    localStorage.clear();
                    sessionStorage.clear();
                    location.reload();
                }
            }
            
            showHelp() {
                document.getElementById('helpModal').classList.remove('hidden');
            }
            
            hideHelp() {
                document.getElementById('helpModal').classList.add('hidden');
            }
            
            toggleMenu() {
                const menu = document.getElementById('dropdownMenu');
                menu.classList.toggle('hidden');
            }
            
            exportData() {
                const data = {
                    memory: this.state.memory,
                    drafts: this.state.drafts,
                    settings: this.state.settings,
                    stats: this.state.stats
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `moltbook-backup-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                this.showNotification('Data exported successfully!', 'success');
            }
            
            async importData() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                
                input.onchange = async (e) => {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    try {
                        const text = await file.text();
                        const data = JSON.parse(text);
                        
                        // Merge data
                        this.state.memory = data.memory || this.state.memory;
                        this.state.drafts = data.drafts || this.state.drafts;
                        this.state.settings = { ...this.state.settings, ...data.settings };
                        this.state.stats = { ...this.state.stats, ...data.stats };
                        
                        this.saveState();
                        this.showNotification('Data imported successfully!', 'success');
                        this.updateUI();
                    } catch (error) {
                        this.showNotification('Failed to import data', 'error');
                    }
                };
                
                input.click();
            }
            
            async apiRequest(endpoint, method = 'GET', body = null) {
                if (!this.state.apiKey) {
                    throw new Error('No API key');
                }
                
                const options = {
                    method,
                    headers: {
                        'Authorization': `Bearer ${this.state.apiKey}`,
                        'Content-Type': 'application/json'
                    }
                };
                
                if (body) {
                    options.body = JSON.stringify(body);
                }
                
                try {
                    const response = await fetch(`${CONFIG.API_BASE}${endpoint}`, options);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    
                    return await response.json();
                } catch (error) {
                    console.error('API Request failed:', error);
                    throw error;
                }
            }
            
            showNotification(message, type = 'info', duration = 5000) {
                const container = document.getElementById('notificationContainer');
                const notification = document.createElement('div');
                
                notification.className = `alert alert-${type} animate-slide`;
                notification.innerHTML = `
                    <div class="flex items-center gap-2">
                        <span class="text-lg">${this.getNotificationIcon(type)}</span>
                        <span>${message}</span>
                    </div>
                `;
                
                container.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.opacity = '0';
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => notification.remove(), 300);
                }, duration);
            }
            
            getNotificationIcon(type) {
                switch(type) {
                    case 'success': return '‚úÖ';
                    case 'error': return '‚ùå';
                    case 'warning': return '‚ö†Ô∏è';
                    default: return '‚ÑπÔ∏è';
                }
            }
            
            loadDemo() {
                document.getElementById('apiKey').value = 'demo_' + Math.random().toString(36).substr(2, 9);
                document.getElementById('geminiKey').value = 'demo_' + Math.random().toString(36).substr(2, 9);
                document.getElementById('agentName').value = 'AI Assistant';
                document.getElementById('personality').value = 'You are a helpful AI assistant that provides accurate and friendly responses. You enjoy engaging in meaningful conversations about technology, science, and philosophy.';
                this.showNotification('Demo credentials loaded!', 'info');
            }
            
            checkUpdates() {
                const currentVersion = CONFIG.VERSION;
                const lastVersion = localStorage.getItem('last_version');
                
                if (lastVersion !== currentVersion) {
                    this.showNotification(`Updated to v${currentVersion}! Check what's new.`, 'info');
                    localStorage.setItem('last_version', currentVersion);
                }
            }
            
            applyTheme() {
                const theme = this.state.settings.theme || 'dark';
                if (theme === 'light') {
                    document.body.classList.add('light-mode');
                    document.getElementById('themeBtn').textContent = '‚òÄÔ∏è';
                } else {
                    document.body.classList.remove('light-mode');
                    document.getElementById('themeBtn').textContent = 'üåô';
                }
            }
            
            updateUI() {
                // Update version badge
                document.getElementById('versionBadge').textContent = `v${CONFIG.VERSION}`;
                
                // Apply theme
                this.applyTheme();
            }
        }

        // ============== THEME MANAGER ==============
        class ThemeManager {
            static toggle() {
                const body = document.body;
                const isLight = body.classList.contains('light-mode');
                const themeBtn = document.getElementById('themeBtn');
                
                if (isLight) {
                    body.classList.remove('light-mode');
                    themeBtn.textContent = 'üåô';
                    app.state.settings.theme = 'dark';
                } else {
                    body.classList.add('light-mode');
                    themeBtn.textContent = '‚òÄÔ∏è';
                    app.state.settings.theme = 'light';
                }
                
                app.saveState();
            }
        }

        // ============== POST MANAGER ==============
        class PostManager {
            static create() {
                document.getElementById('postContent').focus();
            }
            
            static draft() {
                const content = document.getElementById('postContent').value.trim();
                if (!content) {
                    app.showNotification('Cannot save empty draft', 'warning');
                    return;
                }
                
                const draft = {
                    id: Date.now().toString(),
                    content,
                    timestamp: Date.now(),
                    scheduled: false
                };
                
                app.state.drafts.push(draft);
                if (app.state.drafts.length > CONFIG.MAX_DRAFTS) {
                    app.state.drafts.shift();
                }
                
                app.saveState();
                app.showNotification('Draft saved!', 'success');
                document.getElementById('postContent').value = '';
                this.updateCounter();
            }
            
            static schedule() {
                const content = document.getElementById('postContent').value.trim();
                if (!content) {
                    app.showNotification('Cannot schedule empty post', 'warning');
                    return;
                }
                
                const time = prompt('Schedule for (YYYY-MM-DD HH:MM):', 
                    new Date(Date.now() + 3600000).toISOString().slice(0, 16).replace('T', ' '));
                
                if (!time) return;
                
                const scheduled = {
                    id: Date.now().toString(),
                    content,
                    scheduledTime: new Date(time).getTime(),
                    timestamp: Date.now(),
                    status: 'pending'
                };
                
                app.state.scheduled.push(scheduled);
                app.saveState();
                app.showNotification('Post scheduled!', 'success');
                document.getElementById('postContent').value = '';
                this.updateCounter();
            }
            
            static async submit() {
                const content = document.getElementById('postContent').value.trim();
                if (!content) {
                    app.showNotification('Please enter some content', 'warning');
                    return;
                }
                
                const button = document.getElementById('postBtn');
                const loader = document.getElementById('postLoader');
                const text = button.querySelector('span');
                
                button.disabled = true;
                loader.classList.remove('hidden');
                text.textContent = 'Posting...';
                
                try {
                    await app.apiRequest('/posts', 'POST', { content });
                    
                    app.state.stats.posts++;
                    app.showNotification('Post published successfully!', 'success');
                    document.getElementById('postContent').value = '';
                    this.updateCounter();
                    
                    // Reload feed
                    Feed.load();
                    Dashboard.update();
                } catch (error) {
                    app.showNotification('Failed to publish post', 'error');
                } finally {
                    button.disabled = false;
                    loader.classList.add('hidden');
                    text.textContent = 'üì§ Publish Post';
                }
            }
            
            static clear() {
                if (document.getElementById('postContent').value.trim() && 
                    !confirm('Are you sure you want to clear this post?')) {
                    return;
                }
                document.getElementById('postContent').value = '';
                this.updateCounter();
            }
            
            static updateCounter() {
                const textarea = document.getElementById('postContent');
                const counter = document.getElementById('charCounter');
                const length = textarea.value.length;
                const maxLength = 500;
                
                if (counter) {
                    counter.textContent = `${length}/${maxLength} characters`;
                    counter.className = length > maxLength ? 'text-error' : 'opacity-70';
                }
                
                // Disable button if over limit
                const button = document.getElementById('postBtn');
                if (button) {
                    button.disabled = length === 0 || length > maxLength;
                }
            }
            
            static insertEmoji(emoji) {
                const textarea = document.getElementById('postContent');
                const start = textarea.selectionStart;
                const end = textarea.selectionEnd;
                const text = textarea.value;
                
                textarea.value = text.substring(0, start) + emoji + text.substring(end);
                textarea.focus();
                textarea.selectionStart = textarea.selectionEnd = start + emoji.length;
                this.updateCounter();
            }
            
            static insertMention() {
                const username = prompt('Enter username to mention (without @):');
                if (username) {
                    this.insertEmoji(`@${username} `);
                }
            }
            
            static async generateAI() {
                const prompt = prompt('Enter a prompt for AI post generation:', 
                    'Write a short, engaging post about technology');
                
                if (!prompt) return;
                
                try {
                    const response = await AI.generate(prompt);
                    document.getElementById('postContent').value = response.substring(0, 500);
                    this.updateCounter();
                    app.showNotification('AI generated post!', 'success');
                } catch (error) {
                    app.showNotification('Failed to generate post', 'error');
                }
            }
        }

        // ============== FEED MANAGER ==============
        class FeedManager {
            static currentPage = 1;
            static postsPerPage = 20;
            static allPosts = [];
            static filteredPosts = [];
            
            static async load() {
                const container = document.getElementById('feedContainer');
                if (!container) return;
                
                container.innerHTML = `
                    <div class="text-center py-12">
                        <div class="loader mx-auto"></div>
                        <p class="mt-4 opacity-70">Loading feed...</p>
                    </div>
                `;
                
                try {
                    const data = await app.apiRequest('/posts');
                    this.allPosts = data.posts || [];
                    this.filteredPosts = [...this.allPosts];
                    
                    this.render();
                    this.checkForMentions();
                } catch (error) {
                    container.innerHTML = `
                        <div class="alert alert-error">
                            Failed to load feed. Please check your connection.
                        </div>
                    `;
                }
            }
            
            static render() {
                const container = document.getElementById('feedContainer');
                if (!container) return;
                
                const start = (this.currentPage - 1) * this.postsPerPage;
                const end = start + this.postsPerPage;
                const postsToShow = this.filteredPosts.slice(0, end);
                
                if (postsToShow.length === 0) {
                    container.innerHTML = `
                        <div class="text-center py-12">
                            <div class="text-4xl mb-4">üì≠</div>
                            <h3 class="text-lg font-bold mb-2">No posts yet</h3>
                            <p class="opacity-70">Be the first to post something!</p>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = postsToShow.map(post => this.renderPost(post)).join('');
                
                // Update load more button
                const loadMoreBtn = document.getElementById('loadMoreBtn');
                if (loadMoreBtn) {
                    loadMoreBtn.style.display = end < this.filteredPosts.length ? 'block' : 'none';
                }
            }
            
            static renderPost(post) {
                const isMention = post.content.includes(`@${app.state.agentName}`);
                const isLiked = post.likes && post.likes > 0;
                const hasReplies = post.replies && post.replies.length > 0;
                
                return `
                    <div class="card card-sm post-card ${isMention ? 'border-l-4 border-l-primary' : ''}">
                        <div class="post-header">
                            <div class="post-avatar">${post.author?.name?.charAt(0) || '?'}</div>
                            <div class="flex-1">
                                <div class="font-bold">@${post.author?.name || 'unknown'}</div>
                                <div class="text-xs opacity-50">${this.formatTime(post.created_at)}</div>
                            </div>
                            ${isMention ? '<span class="badge badge-primary">@ You</span>' : ''}
                        </div>
                        
                        <div class="post-content break-word">${this.linkify(post.content)}</div>
                        
                        <div class="post-actions">
                            <span class="post-action" onclick="Feed.like('${post.id}')">
                                ${isLiked ? '‚ù§Ô∏è' : 'ü§ç'} ${post.likes || 0}
                            </span>
                            <span class="post-action" onclick="Feed.reply('${post.id}')">
                                üí¨ Reply
                            </span>
                            <span class="post-action" onclick="Feed.quote('${post.id}')">
                                üîÑ Quote
                            </span>
                            <span class="post-action" onclick="Feed.share('${post.id}')">
                                üì§ Share
                            </span>
                        </div>
                        
                        ${hasReplies ? `
                            <div class="mt-3 pt-3 border-t border-border">
                                ${post.replies.map(reply => `
                                    <div class="reply bg-hover rounded p-2 mb-2 text-sm">
                                        <strong>@${reply.author?.name}:</strong> ${reply.content}
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                `;
            }
            
            static linkify(text) {
                return text
                    .replace(/@(\w+)/g, '<span class="text-primary font-bold">@$1</span>')
                    .replace(/#(\w+)/g, '<span class="text-info font-bold">#$1</span>')
                    .replace(/\n/g, '<br>');
            }
            
            static formatTime(timestamp) {
                const date = new Date(timestamp);
                const now = new Date();
                const diff = now - date;
                
                const minute = 60 * 1000;
                const hour = 60 * minute;
                const day = 24 * hour;
                
                if (diff < minute) return 'Just now';
                if (diff < hour) return `${Math.floor(diff / minute)}m ago`;
                if (diff < day) return `${Math.floor(diff / hour)}h ago`;
                if (diff < 7 * day) return `${Math.floor(diff / day)}d ago`;
                
                return date.toLocaleDateString();
            }
            
            static async like(postId) {
                try {
                    await app.apiRequest(`/posts/${postId}/like`, 'POST');
                    app.state.stats.likes++;
                    app.showNotification('Post liked!', 'success');
                    this.load();
                } catch (error) {
                    app.showNotification('Failed to like post', 'error');
                }
            }
            
            static reply(postId) {
                const content = prompt('Enter your reply:');
                if (!content) return;
                
                this.sendReply(postId, content);
            }
            
            static async sendReply(postId, content) {
                try {
                    await app.apiRequest(`/posts/${postId}/reply`, 'POST', { content });
                    app.state.stats.replies++;
                    app.showNotification('Reply sent!', 'success');
                    this.load();
                } catch (error) {
                    app.showNotification('Failed to send reply', 'error');
                }
            }
            
            static quote(postId) {
                const post = this.allPosts.find(p => p.id === postId);
                if (post) {
                    const quote = `Replying to @${post.author?.name}:\n"${post.content.substring(0, 100)}..."\n\n`;
                    document.getElementById('postContent').value = quote;
                    document.getElementById('postContent').focus();
                    PostManager.updateCounter();
                }
            }
            
            static share(postId) {
                const post = this.allPosts.find(p => p.id === postId);
                if (post && navigator.share) {
                    navigator.share({
                        title: `Post by @${post.author?.name}`,
                        text: post.content,
                        url: window.location.href
                    });
                }
            }
            
            static showTab(tab) {
                // Update tab UI
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                event.target.classList.add('active');
                
                // Filter posts
                this.currentPage = 1;
                switch(tab) {
                    case 'mentions':
                        this.filteredPosts = this.allPosts.filter(p => 
                            p.content.includes(`@${app.state.agentName}`));
                        break;
                    case 'replies':
                        this.filteredPosts = this.allPosts.filter(p => 
                            p.replies && p.replies.length > 0);
                        break;
                    case 'liked':
                        this.filteredPosts = this.allPosts.filter(p => 
                            p.likes && p.likes > 0);
                        break;
                    case 'scheduled':
                        this.filteredPosts = app.state.scheduled.map(s => ({
                            ...s,
                            author: { name: app.state.agentName },
                            scheduled: true
                        }));
                        break;
                    default:
                        this.filteredPosts = [...this.allPosts];
                }
                
                this.render();
            }
            
            static search() {
                const query = document.getElementById('feedSearch').value.toLowerCase();
                this.filteredPosts = this.allPosts.filter(post => 
                    post.content.toLowerCase().includes(query) ||
                    post.author?.name?.toLowerCase().includes(query)
                );
                this.currentPage = 1;
                this.render();
            }
            
            static filter() {
                const filter = document.getElementById('feedFilter').value;
                const now = new Date();
                const day = 24 * 60 * 60 * 1000;
                
                this.filteredPosts = this.allPosts.filter(post => {
                    const postDate = new Date(post.created_at);
                    const diff = now - postDate;
                    
                    switch(filter) {
                        case 'today': return diff < day;
                        case 'week': return diff < 7 * day;
                        case 'month': return diff < 30 * day;
                        default: return true;
                    }
                });
                
                this.render();
            }
            
            static loadMore() {
                this.currentPage++;
                this.render();
            }
            
            static checkForMentions() {
                const mentions = this.allPosts.filter(p => 
                    p.content.includes(`@${app.state.agentName}`) && 
                    !p.replies?.some(r => r.author?.name === app.state.agentName)
                );
                
                if (mentions.length > 0 && app.state.settings.autoReply) {
                    mentions.forEach(post => AI.autoReply(post));
                }
            }
        }

        // ============== AI MANAGER ==============
        class AIManager {
            static async generate(prompt) {
                if (!app.state.geminiKey) {
                    throw new Error('Gemini API key required');
                }
                
                const stylePrompts = {
                    friendly: 'You are friendly, warm, and helpful. Use emojis occasionally.',
                    professional: 'You are professional, concise, and accurate.',
                    sarcastic: 'You are playfully sarcastic and witty.',
                    motivational: 'You are an inspiring motivational coach.',
                    concise: 'You are direct and to the point.',
                    creative: 'You are creative and poetic.',
                    analytical: 'You are analytical and detailed.'
                };
                
                const systemPrompt = `${stylePrompts[app.state.aiStyle] || stylePrompts.friendly}
                
                ${app.state.personality}
                
                Recent Context:
                ${app.state.memory.slice(-5).map(m => `${m.role}: ${m.content}`).join('\n')}
                
                Instructions:
                1. Keep response under 280 characters
                2. Stay in character
                3. Be engaging and natural`;
                
                try {
                    const response = await fetch(`${CONFIG.GEMINI_API}?key=${app.state.geminiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: systemPrompt + '\n\nPrompt: ' + prompt }]
                            }]
                        })
                    });
                    
                    const data = await response.json();
                    return data.candidates?.[0]?.content?.parts?.[0]?.text || '[No response]';
                } catch (error) {
                    console.error('AI Generation failed:', error);
                    throw error;
                }
            }
            
            static async autoReply(post) {
                // Check cooldown
                const lastReply = app.state.memory
                    .filter(m => m.role === 'agent')
                    .pop()?.timestamp || 0;
                
                if (Date.now() - lastReply < app.state.settings.replyCooldown * 60000) {
                    return;
                }
                
                // Add to memory
                app.state.memory.push({
                    role: 'user',
                    content: post.content,
                    timestamp: Date.now(),
                    source: 'post'
                });
                
                // Generate reply
                try {
                    const reply = await this.generate(`Reply to this post: "${post.content.substring(0, 100)}..."`);
                    
                    // Send reply
                    await app.apiRequest(`/posts/${post.id}/reply`, 'POST', { content: reply });
                    
                    // Update memory
                    app.state.memory.push({
                        role: 'agent',
                        content: reply,
                        timestamp: Date.now(),
                        source: 'reply'
                    });
                    
                    app.state.stats.aiReplies++;
                    app.saveState();
                    
                    app.showNotification(`Auto-replied to @${post.author?.name}`, 'success');
                } catch (error) {
                    console.error('Auto-reply failed:', error);
                }
            }
            
            static toggleAutoReply() {
                const toggle = document.getElementById('autoReplyToggle');
                app.state.settings.autoReply = toggle.checked;
                app.saveState();
                app.showNotification(`Auto-reply ${toggle.checked ? 'enabled' : 'disabled'}`, 'info');
            }
            
            static toggleLearning() {
                const toggle = document.getElementById('learningToggle');
                app.state.settings.learning = toggle.checked;
                app.saveState();
                app.showNotification(`Learning ${toggle.checked ? 'enabled' : 'disabled'}`, 'info');
            }
            
            static toggleDailyPosts() {
                const toggle = document.getElementById('dailyPostToggle');
                app.state.settings.dailyPosts = toggle.checked;
                app.saveState();
                app.showNotification(`Daily posts ${toggle.checked ? 'enabled' : 'disabled'}`, 'info');
            }
            
            static async train() {
                const data = prompt('Enter training data (Q&A format):\nQ: Question?\nA: Answer');
                if (!data) return;
                
                const lines = data.split('\n');
                for (let i = 0; i < lines.length; i += 2) {
                    if (lines[i].startsWith('Q:') && lines[i + 1]?.startsWith('A:')) {
                        app.state.memory.push({
                            role: 'user',
                            content: lines[i].substring(3).trim(),
                            timestamp: Date.now(),
                            training: true
                        });
                        app.state.memory.push({
                            role: 'agent',
                            content: lines[i + 1].substring(3).trim(),
                            timestamp: Date.now(),
                            training: true
                        });
                    }
                }
                
                app.saveState();
                app.showNotification('AI trained successfully!', 'success');
            }
        }

        // ============== MEMORY MANAGER ==============
        class MemoryManager {
            static show() {
                document.getElementById('memoryModal').classList.remove('hidden');
                this.render();
            }
            
            static hide() {
                document.getElementById('memoryModal').classList.add('hidden');
            }
            
            static render() {
                const container = document.getElementById('memoryContent');
                if (!container) return;
                
                const entries = app.state.memory.slice(-CONFIG.MAX_MEMORY_ENTRIES);
                
                container.innerHTML = entries.map((entry, index) => `
                    <div class="memory-entry ${entry.role === 'user' ? 'memory-user' : 'memory-ai'}">
                        <div class="flex justify-between mb-1">
                            <strong>${entry.role === 'user' ? 'üë§ User' : 'ü§ñ AI'}</strong>
                            <small class="opacity-50">${new Date(entry.timestamp).toLocaleTimeString()}</small>
                        </div>
                        <div class="text-sm">${entry.content}</div>
                        ${entry.training ? '<span class="badge badge-sm badge-info mt-1">Training</span>' : ''}
                    </div>
                `).join('');
            }
            
            static add() {
                const input = document.getElementById('memoryInput');
                const content = input.value.trim();
                
                if (!content) {
                    app.showNotification('Please enter content', 'warning');
                    return;
                }
                
                app.state.memory.push({
                    role: 'user',
                    content,
                    timestamp: Date.now(),
                    manual: true
                });
                
                input.value = '';
                app.saveState();
                this.render();
                app.showNotification('Added to memory', 'success');
            }
            
            static clear() {
                if (confirm('Clear all AI memory? This cannot be undone.')) {
                    app.state.memory = [];
                    app.saveState();
                    this.render();
                    app.showNotification('Memory cleared', 'success');
                }
            }
            
            static export() {
                const data = JSON.stringify(app.state.memory, null, 2);
                const blob = new Blob([data], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `memory-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
            }
        }

        // ============== DASHBOARD MANAGER ==============
        class DashboardManager {
            static update() {
                // Update stats
                document.getElementById('statPosts').textContent = app.state.stats.posts;
                document.getElementById('statLikes').textContent = app.state.stats.likes;
                document.getElementById('statEngagement').textContent = 
                    app.state.stats.posts > 0 
                        ? Math.round((app.state.stats.likes + app.state.stats.replies) / app.state.stats.posts * 100) + '%'
                        : '0%';
                document.getElementById('statAI').textContent = app.state.stats.aiReplies;
            }
            
            static showStats() {
                // Show detailed statistics modal
                app.showNotification('Detailed stats feature coming soon!', 'info');
            }
        }

        // ============== SETTINGS MANAGER ==============
        class SettingsManager {
            static show() {
                document.getElementById('settingsModal').classList.remove('hidden');
                this.showTab('general');
            }
            
            static hide() {
                document.getElementById('settingsModal').classList.add('hidden');
            }
            
            static showTab(tab) {
                // Update tabs
                document.querySelectorAll('#settingsModal .tab').forEach(t => 
                    t.classList.remove('active'));
                event.target.classList.add('active');
                
                // Load content
                const container = document.getElementById('settingsContent');
                switch(tab) {
                    case 'general': container.innerHTML = this.renderGeneral(); break;
                    case 'ai': container.innerHTML = this.renderAI(); break;
                    case 'schedule': container.innerHTML = this.renderSchedule(); break;
                    case 'advanced': container.innerHTML = this.renderAdvanced(); break;
                }
            }
            
            static renderGeneral() {
                return `
                    <div class="space-y-4">
                        <div class="form-group">
                            <label class="form-label">Agent Name</label>
                            <input type="text" class="form-control" id="settingAgentName" 
                                   value="${app.state.agentName}">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Default Theme</label>
                            <select class="form-control" id="settingTheme">
                                <option value="dark" ${app.state.settings.theme === 'dark' ? 'selected' : ''}>Dark</option>
                                <option value="light" ${app.state.settings.theme === 'light' ? 'selected' : ''}>Light</option>
                                <option value="auto">Auto (System)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Language</label>
                            <select class="form-control" id="settingLanguage">
                                <option value="en" selected>English</option>
                                <option value="es">Spanish</option>
                                <option value="fr">French</option>
                                <option value="de">German</option>
                            </select>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <span>Notifications</span>
                            <label class="switch">
                                <input type="checkbox" id="settingNotifications" 
                                       ${app.state.settings.notifications ? 'checked' : ''}>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <button class="btn btn-primary w-full" onclick="Settings.save()">
                            üíæ Save Settings
                        </button>
                    </div>
                `;
            }
            
            static renderAI() {
                return `
                    <div class="space-y-4">
                        <div class="form-group">
                            <label class="form-label">Reply Cooldown (minutes)</label>
                            <input type="number" class="form-control" id="settingCooldown" 
                                   value="${app.state.settings.replyCooldown || 5}" min="1" max="60">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Max Memory Entries</label>
                            <input type="number" class="form-control" id="settingMaxMemory" 
                                   value="${CONFIG.MAX_MEMORY_ENTRIES}" min="10" max="1000">
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <span>Enable Sentiment Analysis</span>
                            <label class="switch">
                                <input type="checkbox" id="settingSentiment">
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <span>Enable Content Filter</span>
                            <label class="switch">
                                <input type="checkbox" id="settingContentFilter" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                `;
            }
            
            static renderSchedule() {
                return `
                    <div class="space-y-4">
                        <div class="form-group">
                            <label class="form-label">Auto-Reply Start Hour</label>
                            <input type="number" class="form-control" id="settingStartHour" 
                                   value="${app.state.settings.scheduleStart || 9}" min="0" max="23">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Auto-Reply End Hour</label>
                            <input type="number" class="form-control" id="settingEndHour" 
                                   value="${app.state.settings.scheduleEnd || 22}" min="0" max="23">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Daily Post Time</label>
                            <input type="time" class="form-control" id="settingDailyTime" 
                                   value="09:00">
                        </div>
                        
                        <div class="alert alert-info">
                            <strong>Note:</strong> Scheduled posts require AI to be running continuously.
                        </div>
                    </div>
                `;
            }
            
            static renderAdvanced() {
                return `
                    <div class="space-y-4">
                        <div class="alert alert-warning">
                            <strong>Warning:</strong> Advanced settings may affect performance.
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">API Timeout (seconds)</label>
                            <input type="number" class="form-control" id="settingTimeout" 
                                   value="10" min="5" max="60">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Cache Duration (minutes)</label>
                            <input type="number" class="form-control" id="settingCache" 
                                   value="5" min="1" max="60">
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <span>Enable Debug Mode</span>
                            <label class="switch">
                                <input type="checkbox" id="settingDebug">
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="mt-6">
                            <button class="btn btn-secondary w-full" onclick="Settings.reset()">
                                üîÑ Reset to Defaults
                            </button>
                        </div>
                    </div>
                `;
            }
            
            static save() {
                // Save general settings
                app.state.agentName = document.getElementById('settingAgentName').value;
                app.state.settings.theme = document.getElementById('settingTheme').value;
                app.state.settings.language = document.getElementById('settingLanguage').value;
                app.state.settings.notifications = document.getElementById('settingNotification
                                                                           app.state.settings.notifications = document.getElementById('settingNotifications').checked;
                
                        // Save AI settings
                        app.state.settings.replyCooldown = parseInt(document.getElementById('settingCooldown').value);
                        CONFIG.MAX_MEMORY_ENTRIES = parseInt(document.getElementById('settingMaxMemory').value);
                        
                        // Save schedule settings
                        app.state.settings.scheduleStart = parseInt(document.getElementById('settingStartHour').value);
                        app.state.settings.scheduleEnd = parseInt(document.getElementById('settingEndHour').value);
                        
                        // Save advanced settings
                        CONFIG.CACHE_DURATION = parseInt(document.getElementById('settingCache').value) * 60 * 1000;
                        
                        app.saveState();
                        app.applyTheme();
                        this.hide();
                        app.showNotification('Settings saved successfully!', 'success');
                    }
                    
                    static reset() {
                        if (confirm('Reset all settings to default?')) {
                            app.state.settings = { ...CONFIG.DEFAULT_SETTINGS };
                            app.saveState();
                            this.hide();
                            app.showNotification('Settings reset to default', 'success');
                        }
                    }
                }

                // ============== SCHEDULE MANAGER ==============
                class ScheduleManager {
                    static show() {
                        // Show schedule management modal
                        const scheduled = app.state.scheduled;
                        
                        let content = `
                            <div class="space-y-4">
                                <h3 class="text-lg font-bold">üìÖ Scheduled Posts</h3>
                                ${scheduled.length === 0 ? 
                                    '<p class="opacity-70 text-center py-8">No scheduled posts</p>' : 
                                    scheduled.map(item => this.renderScheduledItem(item)).join('')}
                            </div>
                        `;
                        
                        app.showModal('Schedule', content, `
                            <button class="btn btn-primary" onclick="Schedule.add()">
                                Ôºã Add Schedule
                            </button>
                        `);
                    }
                    
                    static renderScheduledItem(item) {
                        return `
                            <div class="card card-sm flex items-center justify-between">
                                <div>
                                    <div class="font-medium">${item.content.substring(0, 50)}${item.content.length > 50 ? '...' : ''}</div>
                                    <div class="text-xs opacity-50">
                                        ${new Date(item.scheduledTime).toLocaleString()}
                                    </div>
                                </div>
                                <div class="flex gap-2">
                                    <button class="btn btn-sm btn-secondary" onclick="Schedule.edit('${item.id}')">
                                        ‚úèÔ∏è
                                    </button>
                                    <button class="btn btn-sm btn-error" onclick="Schedule.remove('${item.id}')">
                                        üóëÔ∏è
                                    </button>
                                </div>
                            </div>
                        `;
                    }
                    
                    static add() {
                        const content = prompt('Post content:');
                        if (!content) return;
                        
                        const time = prompt('Schedule time (YYYY-MM-DD HH:MM):');
                        if (!time) return;
                        
                        const scheduledTime = new Date(time).getTime();
                        if (isNaN(scheduledTime)) {
                            app.showNotification('Invalid date format', 'error');
                            return;
                        }
                        
                        app.state.scheduled.push({
                            id: Date.now().toString(),
                            content,
                            scheduledTime,
                            timestamp: Date.now(),
                            status: 'pending'
                        });
                        
                        app.saveState();
                        app.showNotification('Post scheduled!', 'success');
                        this.show();
                    }
                    
                    static edit(id) {
                        const item = app.state.scheduled.find(s => s.id === id);
                        if (!item) return;
                        
                        const newContent = prompt('Edit content:', item.content);
                        if (newContent === null) return;
                        
                        const newTime = prompt('Edit time:', 
                            new Date(item.scheduledTime).toISOString().slice(0, 16).replace('T', ' '));
                        if (!newTime) return;
                        
                        item.content = newContent;
                        item.scheduledTime = new Date(newTime).getTime();
                        app.saveState();
                        app.showNotification('Schedule updated!', 'success');
                        this.show();
                    }
                    
                    static remove(id) {
                        if (confirm('Remove this scheduled post?')) {
                            app.state.scheduled = app.state.scheduled.filter(s => s.id !== id);
                            app.saveState();
                            app.showNotification('Schedule removed', 'success');
                            this.show();
                        }
                    }
                    
                    static check() {
                        const now = Date.now();
                        const toPost = app.state.scheduled.filter(s => 
                            s.status === 'pending' && s.scheduledTime <= now
                        );
                        
                        toPost.forEach(async (item) => {
                            try {
                                await app.apiRequest('/posts', 'POST', { content: item.content });
                                item.status = 'posted';
                                item.postedAt = Date.now();
                                app.showNotification(`Scheduled post published: ${item.content.substring(0, 50)}...`, 'success');
                            } catch (error) {
                                console.error('Failed to post scheduled:', error);
                                item.status = 'failed';
                                item.error = error.message;
                            }
                        });
                        
                        app.saveState();
                    }
                }

                // ============== UTILITY FUNCTIONS ==============
                function togglePassword(id) {
                    const input = document.getElementById(id);
                    const type = input.type === 'password' ? 'text' : 'password';
                    input.type = type;
                }

                // ============== INITIALIZE APP ==============
                const app = new Application();
                window.app = app; // Make accessible for debugging

                // Global functions for onclick handlers
                window.togglePassword = togglePassword;
                window.Theme = ThemeManager;
                window.App = Application;
                window.Post = PostManager;
                window.Feed = FeedManager;
                window.AI = AIManager;
                window.Memory = MemoryManager;
                window.Dashboard = DashboardManager;
                window.Settings = SettingsManager;
                window.Schedule = ScheduleManager;

                // Add switch CSS
                const style = document.createElement('style');
                style.textContent = `
                    .switch {
                        position: relative;
                        display: inline-block;
                        width: 50px;
                        height: 24px;
                    }
                    
                    .switch input {
                        opacity: 0;
                        width: 0;
                        height: 0;
                    }
                    
                    .slider {
                        position: absolute;
                        cursor: pointer;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        background-color: var(--border);
                        transition: .4s;
                        border-radius: 24px;
                    }
                    
                    .slider:before {
                        position: absolute;
                        content: "";
                        height: 16px;
                        width: 16px;
                        left: 4px;
                        bottom: 4px;
                        background-color: white;
                        transition: .4s;
                        border-radius: 50%;
                    }
                    
                    input:checked + .slider {
                        background-color: var(--primary);
                    }
                    
                    input:checked + .slider:before {
                        transform: translateX(26px);
                    }
                `;
                document.head.appendChild(style);

                // Initialize intervals
                setInterval(() => Schedule.check(), 60000); // Check every minute
                setInterval(() => Feed.load(), 30000); // Refresh feed every 30 seconds

                // Close dropdown when clicking outside
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('#menuBtn') && !e.target.closest('#dropdownMenu')) {
                        document.getElementById('dropdownMenu').classList.add('hidden');
                    }
                });

                // Add modal helper
                Application.prototype.showModal = function(title, content, footer = '') {
                    const modal = document.createElement('div');
                    modal.className = 'modal';
                    modal.innerHTML = `
                        <div class="modal-content">
                            <div class="p-6">
                                <div class="flex items-center justify-between mb-6">
                                    <h2 class="text-2xl font-bold">${title}</h2>
                                    <button class="btn btn-sm btn-secondary" onclick="this.closest('.modal').remove()">‚úï</button>
                                </div>
                                ${content}
                                ${footer ? `<div class="mt-6">${footer}</div>` : ''}
                            </div>
                        </div>
                    `;
                    document.body.appendChild(modal);
                };

                // Add activity logging
                function logActivity(message) {
                    const timeline = document.getElementById('activityTimeline');
                    if (!timeline) return;
                    
                    const item = document.createElement('div');
                    item.className = 'timeline-item';
                    item.innerHTML = `
                        <div class="text-sm font-medium">${message}</div>
                        <div class="text-xs opacity-50">Just now</div>
                    `;
                    
                    timeline.insertBefore(item, timeline.firstChild);
                    
                    // Limit to 10 items
                    if (timeline.children.length > 10) {
                        timeline.removeChild(timeline.lastChild);
                    }
                }

                // Override showNotification to log activity
                const originalShowNotification = Application.prototype.showNotification;
                Application.prototype.showNotification = function(message, type) {
                    originalShowNotification.call(this, message, type);
                    logActivity(message);
                };

                // Add network status indicator
                function updateNetworkStatus() {
                    const status = document.getElementById('connectionStatus');
                    if (navigator.onLine) {
                        status.textContent = 'üü¢ Online';
                        status.className = 'badge badge-success';
                    } else {
                        status.textContent = 'üî¥ Offline';
                        status.className = 'badge badge-error';
                    }
                }

                window.addEventListener('online', updateNetworkStatus);
                window.addEventListener('offline', updateNetworkStatus);
                updateNetworkStatus();

                // Add PWA installation prompt
                let deferredPrompt;
                window.addEventListener('beforeinstallprompt', (e) => {
                    e.preventDefault();
                    deferredPrompt = e;
                    
                    const installBtn = document.createElement('button');
                    installBtn.className = 'btn btn-primary';
                    installBtn.innerHTML = 'üì≤ Install App';
                    installBtn.onclick = async () => {
                        if (deferredPrompt) {
                            deferredPrompt.prompt();
                            const { outcome } = await deferredPrompt.userChoice;
                            if (outcome === 'accepted') {
                                app.showNotification('App installed successfully!', 'success');
                            }
                            deferredPrompt = null;
                        }
                    };
                    
                    // Add to header after 5 seconds
                    setTimeout(() => {
                        const header = document.querySelector('.header .flex');
                        if (header) {
                            header.appendChild(installBtn);
                        }
                    }, 5000);
                });

                // Add service worker for offline functionality
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register('sw.js').then(registration => {
                        console.log('ServiceWorker registered:', registration);
                    }).catch(error => {
                        console.log('ServiceWorker registration failed:', error);
                    });
                }

                // Create service worker file in memory
                const swCode = `
                    const CACHE_NAME = 'moltbook-v2';
                    const urlsToCache = [
                        '/',
                        '/index.html',
                        '/manifest.json'
                    ];

                    self.addEventListener('install', event => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then(cache => cache.addAll(urlsToCache))
                        );
                    });

                    self.addEventListener('fetch', event => {
                        event.respondWith(
                            caches.match(event.request)
                                .then(response => response || fetch(event.request))
                        );
                    });

                    self.addEventListener('activate', event => {
                        event.waitUntil(
                            caches.keys().then(keys => 
                                Promise.all(keys.map(key => {
                                    if (key !== CACHE_NAME) {
                                        return caches.delete(key);
                                    }
                                }))
                            )
                        );
                    });
                `;

                // Create blob URL for service worker
                const swBlob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(swBlob);

                // Override service worker registration
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register(swUrl).catch(console.error);
                }

                // Add keyboard shortcuts help
                document.addEventListener('keydown', (e) => {
                    if (e.key === '?' && (e.ctrlKey || e.metaKey)) {
                        e.preventDefault();
                        app.showHelp();
                    }
                });

                // Initialize tooltips
                function initTooltips() {
                    document.querySelectorAll('[data-tooltip]').forEach(el => {
                        el.addEventListener('mouseenter', (e) => {
                            const tooltip = document.createElement('div');
                            tooltip.className = 'tooltip-box';
                            tooltip.textContent = e.target.dataset.tooltip;
                            document.body.appendChild(tooltip);
                            
                            const rect = e.target.getBoundingClientRect();
                            tooltip.style.position = 'fixed';
                            tooltip.style.top = (rect.top - 40) + 'px';
                            tooltip.style.left = (rect.left + rect.width / 2) + 'px';
                            tooltip.style.transform = 'translateX(-50%)';
                            tooltip.style.background = 'rgba(0,0,0,0.9)';
                            tooltip.style.color = 'white';
                            tooltip.style.padding = '6px 12px';
                            tooltip.style.borderRadius = '6px';
                            tooltip.style.fontSize = '12px';
                            tooltip.style.zIndex = '9999';
                            tooltip.style.whiteSpace = 'nowrap';
                            
                            e.target._tooltip = tooltip;
                        });
                        
                        el.addEventListener('mouseleave', (e) => {
                            if (e.target._tooltip) {
                                e.target._tooltip.remove();
                                delete e.target._tooltip;
                            }
                        });
                    });
                }

                // Initialize on load
                document.addEventListener('DOMContentLoaded', () => {
                    initTooltips();
                    
                    // Auto-focus API key input
                    setTimeout(() => {
                        const apiKeyInput = document.getElementById('apiKey');
                        if (apiKeyInput) apiKeyInput.focus();
                    }, 100);
                    
                    // Check for saved credentials
                    if (app.state.apiKey) {
                        document.getElementById('apiKey').value = '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
                        app.login();
                    }
                });

                // Export all classes for debugging
                window.MoltbookAI = {
                    App: Application,
                    Post: PostManager,
                    Feed: FeedManager,
                    AI: AIManager,
                    Memory: MemoryManager,
                    Dashboard: DashboardManager,
                    Settings: SettingsManager,
                    Schedule: ScheduleManager,
                    Theme: ThemeManager,
                    CONFIG
                };

                console.log('Moltbook AI Pro v2.0 initialized');
            </script>
        </body>
        </html>
